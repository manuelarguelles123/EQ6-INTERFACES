<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <title>Registro de Usuario</title>
  <link rel="stylesheet" href="styles2.css">
  <link rel="icon" type="image/x-icon" href="IMG/img5.jpg">
  <style>
    .login-container {
      width: 30%;
      margin: 0 auto;
      padding: 20px;
      background-color: #f9f9f9;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .login-container h2 { text-align: center; margin-bottom: 20px; }
    .login-container form { display: flex; flex-direction: column; }
    .login-container input {
      margin-bottom: 15px;
      padding: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    .login-container button {
      padding: 10px;
      font-size: 16px;
      color: #fff;
      background-color: #007bff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .login-container button:hover { background-color: #0056b3; }
    .login-container p { text-align: center; margin-top: 10px; }
    .login-container p a {
      color: #007bff;
      text-decoration: none;
    }
    .login-container p a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <button id="dark-mode-toggle" class="dark-mode-toggle">Modo Oscuro</button>

  <main id="main-content">
    <div class="main-content">
      <div class="login-container">
        <h2>Crear una cuenta</h2>
        <form id="register-form">
          <label for="new-username">Nombre de usuario:</label>
          <input type="text" id="new-username" placeholder="Ingrese un nombre de usuario" required>
          <label for="new-password">Contraseña:</label>
          <input type="password" id="new-password" placeholder="Ingrese una contraseña" required>
          <button type="submit" id="register-btn">Registrar</button>
        </form>
        <p>¿Ya tienes una cuenta? <a href="login.html">Inicia sesión aquí</a></p>
      </div>
    </div>
  </main>

  <footer>
    <p>Footer / añadir redes?</p>
  </footer>

  <script>
    let usuarios = JSON.parse(localStorage.getItem('usuarios'));
    if (!Array.isArray(usuarios)) {
      usuarios = [
        { username: "admin", password: "1234" },
        { username: "test",  password: "test123" }
      ];
      localStorage.setItem('usuarios', JSON.stringify(usuarios));
    }

    document.getElementById('register-form').addEventListener('submit', event => {
      event.preventDefault();

      const newUsername = document.getElementById('new-username').value.trim();
      const newPassword = document.getElementById('new-password').value.trim();

      if (!newUsername || !newPassword) {
        alert('Por favor, complete todos los campos.');
        return;
      }

      if (usuarios.some(u => u.username === newUsername)) {
        alert('El nombre de usuario ya está en uso. Por favor, elija otro.');
        return;
      }

      usuarios.push({ username: newUsername, password: newPassword });
      localStorage.setItem('usuarios', JSON.stringify(usuarios));

      alert('Usuario registrado exitosamente.');
      window.location.href = "login.html";
    });

    document.addEventListener('DOMContentLoaded', () => {
      const darkModeToggle = document.getElementById('dark-mode-toggle');
      const body = document.body;
      if (localStorage.getItem('dark-mode') === 'enabled') {
        body.classList.add('dark-mode');
      }
      darkModeToggle.addEventListener('click', () => {
        body.classList.toggle('dark-mode');
        if (body.classList.contains('dark-mode')) {
          localStorage.setItem('dark-mode', 'enabled');
        } else {
          localStorage.setItem('dark-mode', 'disabled');
        }
      });
    });
  </script>
</body>
</html>